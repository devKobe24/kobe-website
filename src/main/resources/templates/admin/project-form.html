<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>ìƒˆ í”„ë¡œì íŠ¸ ë“±ë¡</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js"></script>
    <style>
      .container {
        max-width: 900px;
        margin-top: 50px;
      }
      .preview-box {
        border: 1px solid #dee2e6;
        border-radius: 0.375rem;
        padding: 1rem;
        min-height: 100px;
        background-color: #f8f9fa;
      }
      .markdown-guide {
        font-size: 0.875rem;
        color: #6c757d;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-dark bg-dark mb-4">
      <div class="container-fluid">
        <span class="navbar-brand mb-0 h1">ADMIN DASHBOARD</span>
        <a th:href="@{/admin/dashboard}" class="btn btn-secondary btn-sm">ëŒì•„ê°€ê¸°</a>
      </div>
    </nav>

    <div class="container">
      <h2 class="mb-4">Create New Project</h2>

      <form
        th:action="@{/admin/projects/new}"
        th:object="${projectForm}"
        method="post"
        enctype="multipart/form-data"
      >
        <div class="mb-3">
          <label for="title" class="form-label">Project Title</label>
          <input
            type="text"
            th:field="*{title}"
            class="form-control"
            id="title"
            placeholder="ì˜ˆ: ê°œì¸ í¬íŠ¸í´ë¦¬ì˜¤ ì›¹ì‚¬ì´íŠ¸"
            required
          />
        </div>

        <div class="mb-3">
          <label for="description" class="form-label">Description (Markdown ì§€ì›)</label>
          <div class="markdown-guide mb-2">
            <small>
              ğŸ’¡ ë§ˆí¬ë‹¤ìš´ ì‚¬ìš© ê°€ëŠ¥: **êµµê²Œ**, *ê¸°ìš¸ì„*, `ì½”ë“œ`, [ë§í¬](url), - ë¦¬ìŠ¤íŠ¸ ë“±
            </small>
          </div>
          <div class="row">
            <div class="col-md-6">
              <textarea
                th:field="*{description}"
                class="form-control"
                id="description"
                rows="8"
                placeholder="ì‚¬ìš© ê¸°ìˆ  ë° ì£¼ìš” ê¸°ëŠ¥ ì„¤ëª…&#10;&#10;ì˜ˆì‹œ:&#10;- Spring Boot í™œìš©&#10;- **ì£¼ìš” ê¸°ëŠ¥**: ì‚¬ìš©ì ì¸ì¦&#10;- [GitHub](https://github.com/...)"
              ></textarea>
            </div>
            <div class="col-md-6">
              <div class="preview-box" id="preview">
                <em class="text-muted">ë¯¸ë¦¬ë³´ê¸°ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...</em>
              </div>
            </div>
          </div>
        </div>

        <div class="mb-3">
          <label for="imageFile" class="form-label">Project Image</label>
          <input
            type="file"
            th:field="*{imageFile}"
            class="form-control"
            id="imageFile"
            accept="image/*"
          />
          <div class="form-text">jpg, png ë“±ì˜ ì´ë¯¸ì§€ íŒŒì¼ì„ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.</div>
        </div>

        <div class="mb-3">
          <label for="targetUrl" class="form-label">Target Link (Github/Demo)</label>
          <input
            type="text"
            th:field="*{targetUrl}"
            class="form-control"
            id="targetUrl"
            placeholder="https://github.com/..."
          />
        </div>

        <hr class="my-4" />

        <div class="d-grid gap-2">
          <button class="btn btn-primary btn-lg" type="submit">ë“±ë¡í•˜ê¸° (Save)</button>
        </div>
      </form>
    </div>

    <script>
      // Markdown ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸°
      const descriptionTextarea = document.getElementById('description');
      const previewDiv = document.getElementById('preview');

      function updatePreview() {
        const markdownText = descriptionTextarea.value;
        if (markdownText.trim() === '') {
          previewDiv.innerHTML = '<em class="text-muted">ë¯¸ë¦¬ë³´ê¸°ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...</em>';
        } else {
          previewDiv.innerHTML = marked.parse(markdownText);
        }
      }

      // ì…ë ¥í•  ë•Œë§ˆë‹¤ ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
      descriptionTextarea.addEventListener('input', updatePreview);

      // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸° ë¯¸ë¦¬ë³´ê¸° (ìˆ˜ì • ëª¨ë“œì—ì„œ ê¸°ì¡´ ë‚´ìš© í‘œì‹œ)
      window.addEventListener('DOMContentLoaded', updatePreview);
    </script>
  </body>
</html>
