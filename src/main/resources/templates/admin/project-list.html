<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Project List</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <nav class="navbar navbar-dark bg-dark mb-4">
      <div class="container-fluid">
        <span class="navbar-brand mb-0 h1">Project List</span>
        <div class="d-flex">
          <a th:href="@{/admin/dashboard}" class="btn btn-secondary btn-sm me-2">대시보드로 이동</a>
          <form th:action="@{/logout}" method="post">
            <button class="btn btn-outline-light btn-sm" type="submit">Logout</button>
          </form>
        </div>
      </div>
    </nav>

    <div class="container">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>프로젝트 관리</h2>
        <a th:href="@{/admin/projects/new}" class="btn btn-primary">새 프로젝트 등록</a>
      </div>

      <div th:if="${projects.isEmpty()}" class="alert alert-warning text-center">
        등록된 프로젝트가 없습니다.
      </div>

      <table
        class="table table-hover table-bordered align-middle"
        th:unless="${projects.isEmpty()}"
      >
        <thead class="table-light text-center">
          <tr>
            <th scope="col" style="width: 5%">#</th>
            <th scope="col" style="width: 10%">Thumbnail</th>
            <th scope="col" style="width: 20%">Title</th>
            <th scope="col">Description</th>
            <th scope="col" style="width: 10%">Link</th>
            <th scope="col" style="width: 15%">Created Date</th>
            <th scope="col" style="width: 10%">Manage</th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="project : ${projects}">
            <td th:text="${project.id}" class="text-center">1</td>

            <td class="text-center">
              <img
                th:if="${project.imageUrl != null}"
                th:src="${project.imageUrl}"
                class="img-thumbnail"
                style="width: 80px; height: 80px; object-fit: cover"
                alt="Thumbnail"
              />
            </td>

            <td th:text="${project.title}" class="fw-bold">제목</td>

            <td th:text="${project.description}">설명</td>

            <td class="text-center">
              <a
                th:if="${project.targetUrl != null and project.targetUrl != ''}"
                th:href="${project.targetUrl}"
                target="_blank"
                class="btn btn-sm btn-outline-primary"
                >Visit</a
              >
            </td>

            <td
              th:text="${#temporals.format(project.createdDate, 'yyyy-MM-dd HH:mm')}"
              class="text-center"
            >
              날짜
            </td>

            <td class="text-center">
              <form
                th:action="@{/admin/projects/{id}/delete(id=${project.id})}"
                method="post"
                style="display: inline"
              >
                <button
                  type="submit"
                  class="btn btn-sm btn-outline-danger"
                  onclick="return confirm('정말 삭제하시겠습니까? 복구할 수 없습니다.');"
                >
                  삭제
                </button>
              </form>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </body>
</html>
